progressbar {
    border-radius: rem(2px);

    progress,
    trough {
        border: 1px solid $border-color;
        border-radius: rem(2px);
    }

    progress {
        background-color: #{'@accent_color'};
        box-shadow: outset-highlight();

        &:backdrop {
            background-color: bg-color(4);
        }

        @if $color-scheme == "dark" {
            background-clip: padding-box;
        }
    }

    trough {
        background-color: bg-color(0);
        box-shadow:
            outset-highlight(),
            outset-shadow(1);

        @if $color-scheme == "dark" {
            background-clip: padding-box;
        }
    }

    &.horizontal {
        progress,
        trough {
            @extend %outset-background;
        }

        progress {
            animation: progress 2s ease infinite;
            margin-left: -1px;
            margin-right: -1px;

            &:backdrop {
                animation: none;
            }
        }
    }

    &.vertical {
        progress,
        trough {
            @extend %outset-background-vertical;
        }

        progress {
            margin: -1px 0;
        }
    }

    &.flat {
        progress,
        trough {
            box-shadow: none;
            border: none;
            border-radius: rem(6px);
            margin: 0;
        }

        progress,
        progress:backdrop {
            background: #{'alpha(@fg_color, 0.78)'};
        }

        trough {
            background: #{'alpha(@fg_color, 0.15)'};
        }
    }
}

@keyframes progress {
    from {
        background-image: linear-gradient(to right, #{'@accent_color'}, #{'@accent_color'}, #{'@accent_color'});
    }

    33% {
        background-image: linear-gradient(to right, #{'@accent_color'}, #{'alpha(@accent_color_100, 0.5)'}, #{'@accent_color'});
    }

    50% {
        background-image: linear-gradient(to right, #{'@accent_color'}, #{'alpha(@accent_color_100, 0.5)'}, #{'alpha(@accent_color_100, 0.5)'});
    }

    67% {
        background-image: linear-gradient(to right, #{'@accent_color'}, #{'@accent_color'}, #{'alpha(@accent_color_100, 0.5)'});
    }

    to {
        background-image: linear-gradient(to right, #{'@accent_color'}, #{'@accent_color'}, #{'@accent_color'});
    }
}
